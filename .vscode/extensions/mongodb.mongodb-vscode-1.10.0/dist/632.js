"use strict";exports.id=632,exports.ids=[632],exports.modules={6632:(e,t,n)=>{n.d(t,{getDefaultRoleAssumer:()=>A,getDefaultRoleAssumerWithWebIdentity:()=>C});var s=n(75592),r=n(99389),i=n(1208),o=n(47385),c=n(47207),a=n(8766),l=n(47504);class AssumeRoleWithWebIdentityCommand extends(o.uB.classBuilder().ep({...c.S}).m((function(e,t,n,s){return[(0,i.TM)(n,this.serialize,this.deserialize),(0,r.rD)(n,e.getEndpointParameterInstructions())]})).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(a.KT,a.AA).ser(l.$3).de(l.MV).build()){}const d="us-east-1",u=e=>{if("string"==typeof e?.Arn){const t=e.Arn.split(":");if(t.length>4&&""!==t[4])return t[4]}},g=async(e,t,n)=>{const s="function"==typeof e?await e():e,r="function"==typeof t?await t():t;return n?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${s} (provider)`,`${r} (parent client)`,`${d} (STS default)`),s??r??d},p=(e,t)=>{let n,r;return async(i,o)=>{if(r=i,!n){const{logger:s=e?.parentClientConfig?.logger,region:i,requestHandler:o=e?.parentClientConfig?.requestHandler,credentialProviderLogger:c}=e,a=await g(i,e?.parentClientConfig?.region,c);n=new t({credentialDefaultProvider:()=>async()=>r,region:a,requestHandler:o,logger:s})}const{Credentials:c,AssumedRoleUser:a}=await n.send(new s.Q(o));if(!c||!c.AccessKeyId||!c.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${o.RoleArn}`);const l=u(a);return{accessKeyId:c.AccessKeyId,secretAccessKey:c.SecretAccessKey,sessionToken:c.SessionToken,expiration:c.Expiration,...c.CredentialScope&&{credentialScope:c.CredentialScope},...l&&{accountId:l}}}},f=(e,t)=>{let n;return async s=>{if(!n){const{logger:s=e?.parentClientConfig?.logger,region:r,requestHandler:i=e?.parentClientConfig?.requestHandler,credentialProviderLogger:o}=e,c=await g(r,e?.parentClientConfig?.region,o);n=new t({region:c,requestHandler:i,logger:s})}const{Credentials:r,AssumedRoleUser:i}=await n.send(new AssumeRoleWithWebIdentityCommand(s));if(!r||!r.AccessKeyId||!r.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${s.RoleArn}`);const o=u(i);return{accessKeyId:r.AccessKeyId,secretAccessKey:r.SecretAccessKey,sessionToken:r.SessionToken,expiration:r.Expiration,...r.CredentialScope&&{credentialScope:r.CredentialScope},...o&&{accountId:o}}}};var S=n(28658);const y=(e,t)=>t?class CustomizableSTSClient extends e{constructor(e){super(e);for(const e of t)this.middlewareStack.use(e)}}:e,A=(e={},t)=>p(e,y(S.i,t)),C=(e={},t)=>f(e,y(S.i,t))}};
//# sourceMappingURL=632.js.map